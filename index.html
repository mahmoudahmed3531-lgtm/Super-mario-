<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ูู ุณูุฑุจุญ ุงูุชูุตููุงุชุ</title>
<style>
  :root{
    --bg:#0a1b3d; --panel:#0e2a63; --panel2:#14387f; --line:#52a0ff;
    --text:#eaf4ff; --ok:#19d27d; --bad:#ff3b3b; --warn:#ffc107; --glass: rgba(255,255,255,.06);
  }
  *{box-sizing:border-box}
  body{margin:0; font-family:"Cairo",system-ui,sans-serif; color:var(--text);
    background: radial-gradient(1200px 600px at 50% -200px,#183a8d,transparent) , linear-gradient(#061330,#0a1b3d 30%, #071631);
    min-height:100vh; display:flex; align-items:center; justify-content:center; padding:16px;}
  .wrap{width:min(1000px,100%);}
  .top{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px;}
  .logo{display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:1px;
    background:linear-gradient(135deg,#6ecbff,#b7e5ff); -webkit-background-clip:text; color:transparent;
    font-size:clamp(20px,3.4vw,32px);}
  .badge{background:var(--glass); padding:8px 12px; border:1px solid #2756aa; border-radius:999px; font-weight:700}
  .lifelines{display:flex; gap:8px; flex-wrap:wrap}
  .life{border:2px solid var(--line); color:#bfe2ff; background:linear-gradient(180deg,#163a86,#0e2a63);
    padding:8px 12px; border-radius:999px; font-weight:800; cursor:pointer; position:relative;
    box-shadow:0 0 0 2px rgba(82,160,255,.15) inset, 0 6px 18px rgba(0,0,0,.25);}
  .life:disabled{opacity:.45; filter:grayscale(1); cursor:not-allowed}
  .stage{background: radial-gradient(120% 100% at 50% -10%, #2557b6 0%, #0e2a63 65%, #0a1b3d 100%);
    border:2px solid var(--line); border-radius:20px; padding:18px; position:relative; overflow:hidden;
    box-shadow:0 0 30px rgba(82,160,255,.25) inset, 0 0 80px rgba(82,160,255,.15);}
  .timerBar{height:6px; border-radius:6px; background:linear-gradient(90deg,var(--ok),#2ad0ff,var(--warn),var(--bad));
    width:100%; transform-origin:left; margin:8px 0 14px; box-shadow:0 0 12px rgba(82,160,255,.4);}
  .q{background:linear-gradient(180deg,#163a86,#0e2a63); border:2px solid var(--line); border-radius:16px;
    padding:16px; font-weight:800; font-size:clamp(18px,2.2vw,22px); text-align:center; box-shadow:0 10px 24px rgba(0,0,0,.35);}
  .answers{display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:14px}
  .ans{position:relative; overflow:hidden; border-radius:999px; border:2px solid var(--line);
    background:linear-gradient(180deg,#14387f,#0f2f6b); padding:12px 16px; font-weight:800; cursor:pointer;
    box-shadow:0 0 0 2px rgba(82,160,255,.2) inset, 0 6px 18px rgba(0,0,0,.25);}
  .ans:disabled{opacity:.7; cursor:not-allowed}
  .ans.correct{border-color:var(--ok); background:linear-gradient(180deg,#0b6c4c,#0b4231)}
  .ans.wrong{border-color:var(--bad); background:linear-gradient(180deg,#7a0d0d,#430707)}
  .ladder{margin-top:14px; display:flex; gap:6px; flex-wrap:wrap; align-items:center; justify-content:center;}
  .step{border:1px solid #3c6ed8; padding:6px 10px; border-radius:999px; font-size:12px; opacity:.6}
  .activeStep{background:#1a3f95; color:#fff; opacity:1;border-color:#79b8ff}
  .modal{position:fixed; inset:0; display:none; place-items:center; background:rgba(3,8,20,.65); backdrop-filter:blur(2px); z-index:20;}
  .card{background:#0c1f4a; border:2px solid #5aa9ff; border-radius:18px; padding:20px; width:min(520px,92%);
    text-align:center; box-shadow:0 30px 80px rgba(0,0,0,.6);}
  .cta{background:linear-gradient(180deg,#1b77ff,#1256c7); color:#fff; font-weight:900; border:none; padding:10px 16px;
    border-radius:12px; cursor:pointer; box-shadow:0 10px 25px rgba(0,0,0,.35);}
  .foot{display:flex; justify-content:space-between; align-items:center; gap:10px; margin-top:10px; opacity:.9}
  .muted{opacity:.5}
</style>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>
  <!-- ุฃุตูุงุช -->
  <audio id="bgm" src="https://cdn.pixabay.com/audio/2023/10/03/audio_93c6b46b3e.mp3" loop></audio>
  <audio id="clickS" src="https://cdn.pixabay.com/audio/2022/03/15/audio_6e2b4e.mp3"></audio>
  <audio id="okS" src="https://cdn.pixabay.com/audio/2022/03/24/audio_5a7b66.mp3"></audio>
  <audio id="badS" src="https://cdn.pixabay.com/audio/2022/03/15/audio_6b0a8a.mp3"></audio>

  <div class="wrap">
    <div class="top">
      <div class="logo">ูู ุณูุฑุจุญ <span style="color:#19d27d">ุงูุชูุตููุงุช</span>ุ</div>
      <div class="lifelines">
        <button class="life" id="fifty">50:50</button>
        <button class="life" id="aud">ุฑุฃู ุงูุฌูููุฑ</button>
        <button class="life" id="mute">ูุชู/ุชุดุบูู</button>
        <div class="badge">ุงูุณุคุงู: <b id="qNo">1</b>/<b id="qTotal">70</b></div>
        <div class="badge">ุงูููุช: <b id="tRemain">5</b>ุซ</div>
      </div>
    </div>

    <div class="stage">
      <div id="timer" class="timerBar"></div>
      <div id="qTxt" class="q">โฆ</div>
      <div id="answers" class="answers"></div>
      <div id="ladder" class="ladder"></div>
      <div class="foot">
        <div>๐ฑ ุนูุฏ ุงููุตูู ููุฃุณุฆูุฉ 30/50/70 ุชูุฑุณู ุฑุณุงูุฉ ูุงุชุณุงุจ ุจุงูุฌุงุฆุฒุฉ.</div>
        <div class="muted">โฑ๏ธ ุฎุทุฃ ุฃู ุงูุชูุงุก ุงูููุช = ุชุจุฏุฃ ูู ุงูุณุคุงู 1</div>
      </div>
    </div>
  </div>

  <div id="modal" class="modal">
    <div class="card">
      <div id="modalMsg" style="font-weight:900; font-size:20px; margin-bottom:12px">ุฑุณุงูุฉ</div>
      <button id="restart" class="cta">ุงุจุฏุฃ ูู ุฌุฏูุฏ</button>
    </div>
  </div>

<script>
// ====================== ุงูุฅุนุฏุงุฏุงุช ======================
const WHATSAPP_PHONE = "201234567890"; // ุถุน ุฑูู ูุงุชุณุงุจ ุงูุฏููู ุจุฏูู +
const QUESTION_TIME = 5;               // 5 ุซูุงูู ููู ุณุคุงู
const FINAL_TARGET  = 70;              // ุขุฎุฑ ุณุคุงู

// ====================== ุจูู ุงูุฃุณุฆูุฉ (70) ======================
const QUESTIONS = [
  {q:"ุฃูู ูู ุฃุณูู ูู ุงูุตุจูุงูุ",a:["ุนูู ุจู ุฃุจู ุทุงูุจ","ุฒูุฏ ุจู ุซุงุจุช","ุงุจู ูุณุนูุฏ","ุงูุญุณู"],c:0},
  {q:"ุนุงุตูุฉ ุงููุงุจุงูุ",a:["ุฃูุณุงูุง","ุทูููู","ูุงุบููุง","ูููุชู"],c:1},
  {q:"ุฃุทูู ุฃููุงุฑ ุงูุนุงููุ",a:["ุงูุฃูุงุฒูู","ุงูููู","ุงููุงูุบุชุณู","ุงููููุบู"],c:1},
  {q:"ุนุฏุฏ ุฃุฑูุงู ุงูุฅุณูุงูุ",a:["ุฎูุณุฉ","ุฃุฑุจุนุฉ","ุณุชุฉ","ุณุจุนุฉ"],c:0},
  {q:"ุณูุฑุฉ ุชูุณูู ููุจ ุงููุฑุขูุ",a:["ูุณ","ุงููุงุชุญุฉ","ุงูุฅุฎูุงุต","ุงูุฑุญูู"],c:0},
  {q:"ูุฎุชุฑุน ุงููุตุจุงุญ ุงูููุฑุจุงุฆูุ",a:["ุชุณูุง","ุฃุฏูุณูู","ูุงุฑุงุฏุงู","ููุฑุณ"],c:1},
  {q:"ุนุงุตูุฉ ุงููุบุฑุจุ",a:["ุงูุฏุงุฑ ุงูุจูุถุงุก","ุงูุฑุจุงุท","ูุงุณ","ูุฑุงูุด"],c:1},
  {q:"ุนุฏุฏ ุฃุญุฑู ุงููุบุฉ ุงูุนุฑุจูุฉุ",a:["28","29","27","26"],c:0},
  {q:"ุฃูู ูุณุฌุฏ ุจููู ูู ุงูุฅุณูุงูุ",a:["ุงูุฃูุตู","ูุจุงุก","ุงููุจูู","ุงููููุฉ"],c:1},
  {q:"ุฃูุจุฑ ููุงูุจ ุงููุฌููุนุฉ ุงูุดูุณูุฉุ",a:["ุฒุญู","ุงููุดุชุฑู","ุฃูุฑุงููุณ","ูุจุชูู"],c:1},
  {q:"ุงูุตูุงุฉ ุงููุณุทู ููุ",a:["ุงููุฌุฑ","ุงูุธูุฑ","ุงูุนุตุฑ","ุงููุบุฑุจ"],c:2},
  {q:"ุนุงุตูุฉ ูุฑูุณุงุ",a:["ุจุฑููู","ูุฏุฑูุฏ","ุจุงุฑูุณ","ุฑููุง"],c:2},
  {q:"ุงููุบุฉ ุงูุฑุณููุฉ ููุจุฑุงุฒููุ",a:["ุงูุฅุณุจุงููุฉ","ุงูุจุฑุชุบุงููุฉ","ุงูุฅูุฌููุฒูุฉ","ุงููุฑูุณูุฉ"],c:1},
  {q:"ุณูุฉ ุงููุฌุฑุฉ ุงููุจููุฉ ุชูุงููุ",a:["622ู","610ู","632ู","642ู"],c:0},
  {q:"ุฃูุจุฑ ูุญูุทุงุช ุงูุนุงููุ",a:["ุงูููุฏู","ุงูุฃุทูุณู","ุงููุงุฏู","ุงููุชุฌูุฏ"],c:2},
  {q:"ุฃูู ุฎูููุฉ ุนุจุงุณูุ",a:["ุงูููุตูุฑ","ุงูุณูุงุญ","ุงููุฃููู","ุงูููุฏู"],c:1},
  {q:"ุตุงุญุจุฉ ููุจ ูููุจ ุงูุดุฑูุ",a:["ููุฑูุฒ","ุฃู ููุซูู","ูุฑุฏุฉ","ูุฌุงุฉ"],c:1},
  {q:"ุฃุฏูุจ ููุจู ุงูุนุฑุจูุ",a:["ุงูุนูุงุฏ","ูุฌูุจ ูุญููุธ","ุงููููููุทู","ุงููุนุฑู"],c:1},
  {q:"ุงููุนุจุฉ ุชูุน ููุ",a:["ููุฉ","ุงููุฏููุฉ","ุงูุทุงุฆู","ุฌุฏุฉ"],c:0},
  {q:"ุบุงุฒ ุงูุชููุณ ุงูุฃุณุงุณูุ",a:["ุงูููุฏุฑูุฌูู","ุงูุฃูุณุฌูู","ุงูููุชุฑูุฌูู","ุงููููููู"],c:1},
  {q:"ุงููุงุฑุฉ ุงูุชู ุชุถู ูุตุฑุ",a:["ุขุณูุง","ุฃูุฑูููุง","ุฃูุฑูุจุง","ุฃูุฑููุง"],c:1},
  {q:"ุนุฏุฏ ุงูุณุฌุฏุงุช ูู ุงููุฑุขูุ",a:["14","15","13","16"],c:1},
  {q:"ุบุฒูุฉ ุจุฏุฑ ูู ุงูุณูุฉุ",a:["ุงูุฃููู ูููุฌุฑุฉ","ุงูุซุงููุฉ ูููุฌุฑุฉ","ุงูุซุงูุซุฉ","ุงูุฑุงุจุนุฉ"],c:1},
  {q:"ุนุงุตูุฉ ุงูุณูุฏุงูุ",a:["ุงูุฎุฑุทูู","ุฌูุจุง","ุจูุฑุชุณูุฏุงู","ูุณูุง"],c:0},
  {q:"ุฃู ุงููุคูููู ุงููููุจุฉ ุจุญูููุฑุงุกุ",a:["ุฎุฏูุฌุฉ","ุนุงุฆุดุฉ","ุณูุฏุฉ","ุญูุตุฉ"],c:1},
  {q:"ูุฎุชุฑุน ุงููุงุชูุ",a:["ุฃุฏูุณูู","ุฌุฑุงูุงู ุจูู","ูุงุฑูููู","ุชุณูุง"],c:1},
  {q:"ุฃูุฏู ุฌุงูุนุฉ ูุงุฆูุฉุ",a:["ูุงุฑูุงุฑุฏ","ุงููุฑูููู","ุงูุฃุฒูุฑ","ุจูููููุง"],c:1},
  {q:"ุนุงุตูุฉ ุฅุณุจุงููุงุ",a:["ูุฏุฑูุฏ","ุจุฑุดูููุฉ","ูุงููุณูุง","ูููุง"],c:0},
  {q:"ุฃูู ูู ุฌูุฑ ุจุงููุฑุขู ุจููุฉุ",a:["ุนูุฑ","ุฃุจู ุจูุฑ","ุงุจู ูุณุนูุฏ","ุจูุงู"],c:2},
  {q:"ุนุฏุฏ ุงูููุงูุจ ุงููุนุชุฑู ุจูุง ุญุงูููุงุ",a:["8","9","7","6"],c:0},
  {q:"ุตูู ุฑูุถุงู ูุฑุถ ูู ุงูุณูุฉุ",a:["ุงูุฃููู ูููุฌุฑุฉ","ุงูุซุงููุฉ ูููุฌุฑุฉ","ุงูุซุงูุซุฉ","ุงูุนุงุดุฑุฉ"],c:1},
  {q:"ูููุจ ููุนุฑู ุจุงููููุจ ุงูุฃุญูุฑุ",a:["ุจููุชู","ุงููุฑูุฎ","ุนุทุงุฑุฏ","ุงูุฒููุฑุฉ"],c:1},
  {q:"ุฃุทูู ุณูุฑุฉ ูู ุงููุฑุขูุ",a:["ุขู ุนูุฑุงู","ุงูุจูุฑุฉ","ุงููุณุงุก","ุงูุฃุนุฑุงู"],c:1},
  {q:"ุตุงุญุจ ููุจ ุณูู ุงูููุ",a:["ุญูุฒุฉ","ุฎุงูุฏ ุจู ุงููููุฏ","ุนูุฑ","ุนูู"],c:1},
  {q:"ุนุงุตูุฉ ุชุฑููุงุ",a:["ุฅุณุทูุจูู","ุฃููุฑุฉ","ุฅุฒููุฑ","ุจูุฑุตุฉ"],c:1},
  {q:"ุจุญุฑ ููุตู ุจูู ุฃูุฑูุจุง ูุฃูุฑูููุงุ",a:["ุงูุนุฑุจู","ุงููุชูุณุท","ุงูุฃุณูุฏ","ุงูุฃุญูุฑ"],c:1},
  {q:"ุงูุตุญุงุจู ูุคุฐู ุงูุฑุณููุ",a:["ุจูุงู","ุฃุจู ูุฑูุฑุฉ","ุฃุจู ููุณู","ุณููุงู"],c:0},
  {q:"ูุฏููุฉ ุงูุชูุงู ุงูุณุจุนุ",a:["ุฑููุง","ุฃุซููุง","ุจุงุฑูุณ","ุจุฑุงุบ"],c:0},
  {q:"ุงูุนููู ุงูุฑุณููุฉ ููุตุฑุ",a:["ุงูุฌููู","ุงูุฑูุงู","ุงูุฏููุงุฑ","ุงูุฏููุงุฑ"],c:0},
  {q:"ุณูุฑุฉ ุชูุณูู ุนุฑูุณ ุงููุฑุขูุ",a:["ุงูุฑุญูู","ููุณู","ุงูููู","ุงููุญู"],c:0},
  {q:"ุณูุงุญ ุงูุนูู ูุฑูุฒ ูู ูู ุงูุทุจุ",a:["ุงููุฃุณ","ุงูุตูุฑ","ุงูุนุตุง ูุงูุซุนุจุงู","ุงูุดูุนุฏุงู"],c:2},
  {q:"ุฃุดูุฑ ุฌุจู ูู ููุฉุ",a:["ุงูุทูุฑ","ุนุฑูุฉ","ุฃุญุฏ","ุงูููุฑ"],c:3},
  {q:"ุงููุงุฆุฏ ุงููุณูู ูู ูุนุฑูุฉ ุงููุฑูููุ",a:["ุนูุฑู ุจู ุงูุนุงุต","ุฎุงูุฏ ุจู ุงููููุฏ","ุณุนุฏ ุจู ุฃุจู ููุงุต","ุงููุซูู"],c:1},
  {q:"ุงููุงุฏุฉ ุงูุชู ุชูููู ุงูุฃููุงุณุ",a:["ุงูุญุฏูุฏ","ุงููุฑุจูู","ุงูุณููููู","ุงูุฐูุจ"],c:1},
  {q:"ุนุงุตูุฉ ูุจูุงูุ",a:["ุจูุฑูุช","ุทุฑุงุจูุณ","ุตูุฏุง","ุตูุนุงุก"],c:0},
  {q:"ุงููุงุชุจ ูุทู ุญุณูู ููุจุ",a:["ุนููุฏ ุงูุฃุฏุจ ุงูุนุฑุจู","ุดูุฎ ุงูููุงุฏ","ุฃุจู ุงูุฑูุงูุฉ","ุฃููุฑ ุงูุดุนุฑุงุก"],c:0},
  {q:"ุฃูู ูู ุฎุทู ุจุงููููุ",a:["ุฅุฏุฑูุณ","ููุญ","ุขุฏู","ุฅุจุฑุงููู"],c:0},
  {q:"ูุฏููุฉ ุงูุฃููุงุฑุ",a:["ุจุงุฑูุณ","ููุฏู","ูุฏุฑูุฏ","ููููุง"],c:0},
  {q:"ูููุงุณ ุดุฏุฉ ุงูุฒูุงุฒูุ",a:["ุจุงุณูุงู","ุฑูุฎุชุฑ","ูููุชู","ูููุช"],c:1},
  {q:"ูุฏููุฉ ููุณุทูููุฉ ุชูุณูู ุนุฑูุณ ุงูุจุญุฑุ",a:["ุนูุง","ูุงูุง","ุญููุง","ุบุฒุฉ"],c:1},
  {q:"ุฃูู ุงูุฎููุงุก ุงูุฑุงุดุฏููุ",a:["ุฃุจู ุจูุฑ","ุนูุฑ","ุนุซูุงู","ุนูู"],c:0},
  {q:"ููุฑ ุฏุฌูุฉ ููุฑ ููุ",a:["ุณูุฑูุง","ุงูุนุฑุงู","ูุตุฑ","ุงูุณูุฏุงู"],c:1},
  {q:"ุงููุงุฑุฉ ุงูุฃุตุบุฑ ูุณุงุญุฉุ",a:["ุฃุณุชุฑุงููุง","ุฃูุฑูุจุง","ุฃูุชุงุฑูุชููุง","ุขุณูุง"],c:0},
  {q:"ุตุงุญุจ ูุตูุฏุฉ ููุฌ ุงูุจุฑุฏุฉุ",a:["ุงูุจูุตูุฑู","ุงููุชูุจู","ุฃุญูุฏ ุดููู","ุนูุชุฑุฉ"],c:0},
  {q:"ุงููุนุฏู ุงูุฃูุซุฑ ุชูููุฑูุง ุจุงููุดุฑุฉ ุงูุฃุฑุถูุฉุ",a:["ุงูุฃููููููู","ุงูุญุฏูุฏ","ุงููุญุงุณ","ุงูุฒูู"],c:0},
  {q:"ูู ุนุฏุฏ ุณููุงุช ุงููุฑูุ",a:["50","100","75","200"],c:1},
  {q:"ุฃูู ูู ููุจ ุจุฃููุฑ ุงููุคููููุ",a:["ุนูุฑ","ุนูู","ุนุซูุงู","ุฃุจู ุจูุฑ"],c:0},
  {q:"ูุฏููุฉ ุชูุณูู ุฃู ุงูุฏููุงุ",a:["ุงููุงูุฑุฉ","ุจุบุฏุงุฏ","ุฏูุดู","ุงูุฑุจุงุท"],c:0},
  {q:"ุณูุฑุฉ ุชูุนุฑู ุจุณูุฑุฉ ุงููุชุงูุ",a:["ูุญูุฏ","ุงูุฃููุงู","ุงูุชูุจุฉ","ุงูุตู"],c:0},
  {q:"ุนุฏุฏ ููุงุชูุญ ุงูุจูุงูู ุงูููุงุณูุ",a:["66","72","88","96"],c:2},
  {q:"ุงูุนุงูู ููุชุดู ูุงููู ุงูุฌุงุฐุจูุฉุ",a:["ุขููุดุชุงูู","ูููุชู","ุบุงูููู","ูุจูุฑ"],c:1},
  {q:"ุนูููุฑ ุงููุจู ุนูุฏ ุงูุจุนุซุฉุ",a:["25","30","40","45"],c:2},
  {q:"ูููุฉ (ูุชุงุจ) ุฌูุนูุงุ",a:["ูุชุจ","ูุชุงุจูู","ูุชุงุจุงุช","ููุชุจุงุช"],c:0},
  {q:"ุนููุฉ ุงูุณุนูุฏูุฉุ",a:["ุงูุฏููุงุฑ","ุงูุฏุฑูู","ุงูุฑูุงู","ุงูุฌููู"],c:2},
  {q:"ุญุฑุจ ุฃูุชูุจุฑ ูุงูุช ุนุงูุ",a:["1973","1967","1956","1991"],c:0},
  {q:"ุฃูู ูู ุทุงู ุจุงููุนุจุฉุ",a:["ุฌุจุฑูู","ุฅุจุฑุงููู","ุขุฏู","ุฅุณูุงุนูู"],c:2},
  {q:"ุฃุนูู ููุฉ ูู ุงูุนุงููุ",a:["ููููููุฌุงุฑู","ุฅููุฑุณุช","ููู ุจูุงู","ุฃููููุงุฌูุง"],c:1},
  {q:"ุฃูู ูู ุจูู ุงูุณุฌูู ูู ุงูุฅุณูุงูุ",a:["ุนูุฑ","ุนูู","ูุนุงููุฉ","ุนูุฑู"],c:0},
  {q:"ุณูุฑุฉ ุชูุณูู ุจูู ุฅุณุฑุงุฆููุ",a:["ุงูุฅุณุฑุงุก","ุงููุญู","ุงูุชูููุฑ","ุงูููุงูุฉ"],c:0},
  {q:"ุงูุนุงุตูุฉ ุงูุงูุชุตุงุฏูุฉ ูููุบุฑุจุ",a:["ุทูุฌุฉ","ุงูุฏุงุฑ ุงูุจูุถุงุก","ูุงุณ","ุงูุนููู"],c:1},
  {q:"ุฃุฏุงุฉ ููุงุณ ุดุฏุฉ ุงูุตูุชุ",a:["ุฏูุณูุจู","ูููุช","ุฃูู","ูุงุท"],c:0},
  {q:"ุฃูู ูู ุฑูู ุจุณูู ูู ุณุจูู ุงูููุ",a:["ุณุนุฏ ุจู ุฃุจู ููุงุต","ุทูุญุฉ","ุงูุฒุจูุฑ","ุญูุฒุฉ"],c:0},
];

// ====================== ุนูุงุตุฑ ูุงุฌูุฉ ======================
const qTxt     = document.getElementById('qTxt');
const answers  = document.getElementById('answers');
const qNoEl    = document.getElementById('qNo');
const qTotalEl = document.getElementById('qTotal');
const timerBar = document.getElementById('timer');
const tRemain  = document.getElementById('tRemain');
const ladder   = document.getElementById('ladder');
const modal    = document.getElementById('modal');
const modalMsg = document.getElementById('modalMsg');
const restart  = document.getElementById('restart');
const fiftyBtn = document.getElementById('fifty');
const audBtn   = document.getElementById('aud');
const muteBtn  = document.getElementById('mute');

const bgm   = document.getElementById('bgm');
const clickS= document.getElementById('clickS');
const okS   = document.getElementById('okS');
const badS  = document.getElementById('badS');

qTotalEl.textContent = FINAL_TARGET;

// ====================== ุญุงูุฉ ุงููุนุจุฉ ======================
let idx=0, correctIndex=0, timer=null, running=false;
let usedFifty=false, usedAudience=false;
let muted=false;

// ====================== ุฃุฏูุงุช ======================
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
function play(s){ if(!muted){try{s.currentTime=0; s.play()}catch(e){}} }
function waSend(msg){ const url=`https://wa.me/${WHATSAPP_PHONE}?text=${encodeURIComponent(msg)}`; window.open(url,'_blank'); }
function showModal(msg){ modalMsg.innerHTML=msg; modal.style.display='grid'; }
function hideModal(){ modal.style.display='none'; }
function resetLifelines(){ usedFifty=false; usedAudience=false; fiftyBtn.disabled=false; audBtn.disabled=false; }
function makeLadder(){
  ladder.innerHTML="";
  for(let i=1;i<=FINAL_TARGET;i++){
    const d=document.createElement('div'); d.className='step'; d.textContent=i;
    if(i===30||i===50||i===70){ d.style.borderColor="#ffd66b"; d.style.color="#ffd66b"; d.style.fontWeight="900"; }
    ladder.appendChild(d);
  }
}
function markLadder(){ [...ladder.children].forEach((c,i)=>c.classList.toggle('activeStep',i===idx)); }

// ====================== ุงููุคููุช ======================
function startTimer(){
  stopTimer();
  let left = QUESTION_TIME;
  tRemain.textContent = left;
  const start = Date.now();
  timer = setInterval(()=>{
    const remaining = Math.max(0, QUESTION_TIME - Math.floor((Date.now()-start)/1000));
    tRemain.textContent = remaining;
    timerBar.style.transform = `scaleX(${remaining/QUESTION_TIME})`;
    if(remaining<=0){ stopTimer(); fail(); }
  }, 200);
}
function stopTimer(){ if(timer){ clearInterval(timer); timer=null; } }

// ====================== ุนุฑุถ ุงูุณุคุงู ======================
function render(){
  running=true;
  qNoEl.textContent = idx+1;
  qTxt.textContent = QUESTIONS[idx].q;

  answers.innerHTML="";
  const order=[0,1,2,3]; shuffle(order);
  correctIndex = order.indexOf(QUESTIONS[idx].c);

  order.forEach((pos,i)=>{
    const b=document.createElement('button');
    b.className='ans';
    b.textContent = QUESTIONS[idx].a[pos];
    b.onclick = ()=> choose(i);
    answers.appendChild(b);
  });

  markLadder(); startTimer();
}

// ====================== ุงุฎุชูุงุฑ ุงูุฅุฌุงุจุฉ ======================
function choose(i){
  if(!running) return;
  play(clickS); running=false; stopTimer();
  const btns=[...answers.children];
  if(i===correctIndex){
    btns[i].classList.add('correct'); play(okS);
    setTimeout(()=>{
      const qNumber=idx+1;
      if(qNumber===30){ showModal("๐ ูุจุฑูู! ูุณุจุช <b>ุชูุตููุฉ ูุฌุงููุฉ</b> โ"); waSend("๐ ูุตูุช ููุณุคุงู 30 โ ูุณุจุช ุชูุตููุฉ ูุฌุงููุฉ ูู Fly Express."); }
      if(qNumber===50){ showModal("๐ ูุจุฑูู! ูุณุจุช <b>ุชูุตููุชูู ูุฌุงููุง</b> โ"); waSend("๐ ูุตูุช ููุณุคุงู 50 โ ูุณุจุช ุชูุตููุชูู ูุฌุงููุง ูู Fly Express."); }
      if(qNumber===70){ showModal("๐ ูุจุฑูู! ุฃูููุช ุงููุนุจุฉ โ ูุณุจุช <b>3 ุชูุตููุงุช ูุฌุงููุฉ</b> ๐"); waSend("๐ ุฃูููุช ุฌููุน ุงูุฃุณุฆูุฉ (70) โ ูุณุจุช 3 ุชูุตููุงุช ูุฌุงููุฉ."); return; }
      idx++; render();
    },650);
  }else{
    btns[i].classList.add('wrong'); btns[correctIndex].classList.add('correct'); play(badS);
    setTimeout(fail,900);
  }
}
function fail(){ showModal("โ ุฅุฌุงุจุฉ ุฎุงุทุฆุฉ ุฃู ุงูุชูู ุงูููุช.<br>ุชุจุฏุฃ ูู ุงูุณุคุงู <b>1</b>."); }

// ====================== ุฅุนุงุฏุฉ ุงูุชุดุบูู ======================
restart.onclick=()=>{ hideModal(); idx=0; resetLifelines(); render(); };

// ====================== ุงููุณุงุนุฏุงุช ======================
document.getElementById('fifty').onclick=()=>{
  if(usedFifty) return; usedFifty=true; fiftyBtn.disabled=true;
  const btns=[...answers.children]; let removed=0;
  for(let i=0;i<btns.length;i++){ if(i!==correctIndex && removed<2){ btns[i].disabled=true; btns[i].style.opacity=.35; removed++; } }
};
document.getElementById('aud').onclick=()=>{
  if(usedAudience) return; usedAudience=true; audBtn.disabled=true;
  const bars=[0,0,0,0]; let total=100, main=60+Math.floor(Math.random()*21);
  bars[correctIndex]=main; total-=main;
  for(let i=0;i<4;i++){ if(i===correctIndex) continue; const v=(i<3?Math.floor(Math.random()*(total-(3-i))):total); bars[i]=v; total-=v; }
  const poll=document.createElement('div');
  poll.style.cssText="position:absolute;inset:0;background:rgba(6,19,48,.85);display:grid;place-items:center;z-index:5;";
  poll.innerHTML=`<div class="card" style="width:min(520px,92%);">
    <div style="font-weight:900;margin-bottom:10px">๐ ุฑุฃู ุงูุฌูููุฑ</div>
    <div style="display:grid;gap:8px;text-align:start">
      ${bars.map((p,i)=>`<div><b>${String.fromCharCode(65+i)}:</b>
      <span style="display:inline-block;height:10px;background:#52a0ff;width:${p*2}px;border-radius:6px;margin:0 6px -1px 6px"></span>
      <b>${p}%</b></div>`).join("")}
    </div>
    <button class="cta" style="margin-top:14px" id="closePoll">ุญุณููุง</button></div>`;
  document.body.appendChild(poll);
  document.getElementById('closePoll').onclick=()=>poll.remove();
};

// ูุชู/ุชุดุบูู ุงูููุณููู
muteBtn.onclick=()=>{ muted=!muted; if(muted) bgm.pause(); else bgm.play().catch(()=>{}); muteBtn.classList.toggle('muted',muted); };

// ุชุดุบูู ุฃููู
(function init(){
  // ุฎูุท ุงูุฃุณุฆูุฉ ููุญูููุฉ
  shuffle(QUESTIONS);
  // ุถูุงู 70 ููุท
  while(QUESTIONS.length>FINAL_TARGET) QUESTIONS.pop();
  // ุจูุงุก ุงูุณููู
  (function make(){ ladder.innerHTML=""; for(let i=1;i<=FINAL_TARGET;i++){ const d=document.createElement('div'); d.className='step'; d.textContent=i; if(i===30||i===50||i===70){ d.style.borderColor="#ffd66b"; d.style.color="#ffd66b"; d.style.fontWeight="900"; } ladder.appendChild(d);} })();
  render();
  bgm.volume=.5; bgm.play().catch(()=>{});
})();
</script>
</body>
</html>
