<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>لعبة الأسئلة — Fly Express</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600;700;800;900&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1:#001321; --bg2:#000a12;
    --glass: rgba(255,255,255,.06);
    --brand:#21f5b3; --accent:#00ffaa; --accent2:#00a8ff;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:'Cairo',system-ui,sans-serif; color:#eaf1f6;
    min-height:100svh; display:flex; align-items:center; justify-content:center; padding:22px;
    background:
      radial-gradient(1100px 600px at 10% 10%, #072235 0%, transparent 65%),
      radial-gradient(1100px 600px at 90% 90%, #00131c 0%, transparent 65%),
      conic-gradient(from 0deg at 50% 50%, var(--bg1), #07273a, #031c2b, var(--bg2));
    background-size: 140% 140%, 140% 140%, 200% 200%;
    animation: bg1 16s ease-in-out infinite, bg2 18s ease-in-out infinite, hue 36s linear infinite;
    overflow:hidden;
  }
  @keyframes bg1{0%,100%{background-position:10% 10%,90% 90%,0% 50%}50%{background-position:30% 20%,70% 80%,100% 50%}}
  @keyframes bg2{0%,100%{background-position:10% 10%,90% 90%,0% 50%}50%{background-position:15% 25%,85% 75%,100% 50%}}
  @keyframes hue{0%{filter:hue-rotate(0)}100%{filter:hue-rotate(360deg)}}

  .game{
    width:min(96vw, 560px);
    background: rgba(255,255,255,.05);
    border:1px solid rgba(255,255,255,.08);
    border-radius:20px; padding:18px;
    box-shadow:0 18px 50px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.06);
  }
  h1{margin:4px 0 8px; text-align:center; font-weight:900; color:#fff}
  .sub{margin:0 0 14px; text-align:center; color:#cfe2ee; font-weight:700}
  .hud{display:flex; gap:10px; justify-content:space-between; flex-wrap:wrap}
  .badge{flex:1 1 120px; background:var(--glass); border:1px solid rgba(255,255,255,.08);
    padding:10px 12px; border-radius:12px; text-align:center; font-weight:900}
  .q{margin:12px 0; padding:14px; background:rgba(0,0,0,.25); border:1px solid rgba(255,255,255,.07); border-radius:14px; text-align:center; font-size:18px}
  .opts{display:grid; gap:10px}
  .btn{
    background:linear-gradient(90deg, var(--accent), var(--accent2));
    border:none; border-radius:999px; padding:12px 16px; cursor:pointer; font-weight:900; color:#001316;
    box-shadow:0 10px 26px rgba(0,255,170,.25); transition:transform .08s ease, filter .2s;
  }
  .btn:hover{transform:translateY(-1px); filter:brightness(1.04)}
  .btn.alt{background:linear-gradient(90deg, #d8f2ff, #caffea); color:#003b35}
  .msg{margin-top:10px; text-align:center; color:#b8c0c9; font-weight:700; min-height:22px}
  .toast{position:fixed; inset:auto 12px 12px 12px; margin:auto; max-width:520px; background:#08131c; border:1px solid rgba(255,255,255,.1); border-radius:14px; padding:12px 14px; text-align:center; display:none}
  .toast.show{display:block; animation:pop .3s ease}
  @keyframes pop{from{transform:translateY(10px);opacity:0}to{transform:translateY(0);opacity:1}}

  #musicBtn{
    position:fixed; bottom:14px; right:14px; width:52px; height:52px; border-radius:50%;
    border:0; background:#00ffaa; color:#001316; font-size:22px; cursor:pointer; box-shadow:0 12px 28px rgba(0,0,0,.4)
  }
</style>
</head>
<body>

<!-- موسيقى اللعبة (تبدأ أول ما اللاعب يضغط "ابدأ اللعب") -->
<audio id="bgm" src="https://limewire.com/d/2ZVZt#7IuH2zjDcw" preload="auto" loop></audio>
<!-- صوت الإجابة الصحيحة (غيّر الرابط تحت بـ رابطك) -->
<audio id="sfxCorrect" preload="auto"></audio>

<div class="game" role="main">
  <h1>🎯 لعبة الأسئلة — Fly Express</h1>
  <div class="sub">⏳ لديك 30 ثانية لكل سؤال — إجابة واحدة خطأ ترجع لبداية اللعبة</div>

  <div class="hud">
    <div class="badge">السؤال: <span id="qIndex">1</span>/<span id="qTotal">70</span></div>
    <div class="badge">الوقت: <span id="time">30</span> ث</div>
    <div class="badge">الجوائز: 30/50/70</div>
  </div>

  <div class="q" id="question">اضغط “ابدأ اللعب” للبدء!</div>
  <div class="opts" id="opts"></div>

  <div class="msg" id="msg">بالتوفيق 🍀</div>

  <div style="display:flex; gap:10px; margin-top:12px">
    <button class="btn" id="start">ابدأ اللعب 🚀</button>
    <button class="btn alt" id="reset" style="display:none">إعادة من البداية ↺</button>
  </div>
</div>

<button id="musicBtn" title="تشغيل/كتم الموسيقى">🔇</button>

<div class="toast" id="toast"></div>

<script>
/* ================== إعداد الصوت ================== */
// ضع هنا رابط صوت الإجابة الصحيحة الذي سترسله لي
const CORRECT_SFX = "REPLACE_WITH_YOUR_CORRECT_SFX_URL.mp3"; // ← استبدلها برابطك
const bgm = document.getElementById('bgm');
const sfxCorrect = document.getElementById('sfxCorrect');
sfxCorrect.src = CORRECT_SFX;

// فallback نغمة نجاح بسيطة لو رابط الصوت مش متاح
function successBeep(){
  try{
    const AC = window.AudioContext||window.webkitAudioContext; if(!AC) return;
    const ctx = new AC(), o = ctx.createOscillator(), g = ctx.createGain();
    o.type='triangle'; o.frequency.value=880; o.connect(g); g.connect(ctx.destination);
    g.gain.setValueAtTime(.0001, ctx.currentTime);
    g.gain.exponentialRampToValueAtTime(.5, ctx.currentTime+.02);
    g.gain.exponentialRampToValueAtTime(.0001, ctx.currentTime+.18);
    o.start(); o.stop(ctx.currentTime+.22);
  }catch(e){}
}

const musicBtn = document.getElementById('musicBtn');
musicBtn.addEventListener('click', ()=>{
  if(bgm.paused){ bgm.play().catch(()=>{}); musicBtn.textContent="🎵"; }
  else{ bgm.pause(); musicBtn.textContent="🔇"; }
});

/* ================== بيانات اللعبة ================== */
const qEl = document.getElementById('question');
const optsEl = document.getElementById('opts');
const timeEl = document.getElementById('time');
const msgEl = document.getElementById('msg');
const startBtn = document.getElementById('start');
const resetBtn = document.getElementById('reset');
const qIndexEl = document.getElementById('qIndex');
const qTotalEl = document.getElementById('qTotal');
const toast = document.getElementById('toast');

const TOTAL = 70;
qTotalEl.textContent = TOTAL;

let timer=null, timeLeft=30, idx=0, playing=false;

/* نموذج أسئلة (مثال) — استبدل/زود بحد ما توصل لـ 70 سؤال */
const questions = [
  {q:"ما عاصمة مصر؟", a:["القاهرة","الإسكندرية","الجيزة","المنصورة"], c:0},
  {q:"الغاز: ما هو الشيء الذي يمشي بلا قدمين؟", a:["النهر","الهواء","الظل","الصوت"], c:2},
  {q:"من النبي الذي بنى الكعبة؟", a:["إبراهيم","موسى","نوح","محمد"], c:0},
  {q:"سورة تُسمّى قلب القرآن:", a:["يس","الرحمن","البقرة","الملك"], c:0},
  {q:"عدد قارات العالم:", a:["5","6","7","8"], c:2},
];
// لو حابب تكرر/تستكمل تلقائيًا لحد 70 مؤقتًا:
while(questions.length < TOTAL){
  questions.push({q:`سؤال عام رقم ${questions.length+1}?`, a:["أ","ب","ج","د"], c:0});
}

/* ================== وظائف مساعدة ================== */
function showToast(t){ toast.textContent=t; toast.classList.add('show'); setTimeout(()=>toast.classList.remove('show'),1800); }

function startGame(){
  playing = true; idx = 0;
  startBtn.style.display='none';
  resetBtn.style.display='inline-block';
  msgEl.textContent="هيا بنا! ✅";
  // تشغيل الموسيقى بعد تفاعل المستخدم
  bgm.volume = 0.35;
  bgm.play().catch(()=>{});
  nextQ();
}

function resetGame(){
  clearInterval(timer);
  playing=false; startBtn.style.display='inline-block'; resetBtn.style.display='none';
  qEl.textContent = "اضغط “ابدأ اللعب” للبدء!";
  optsEl.innerHTML="";
  msgEl.textContent="بالتوفيق 🍀";
  timeEl.textContent="30";
  qIndexEl.textContent="1";
}

function nextQ(){
  if(idx >= TOTAL){ endGame(true); return; }
  const q = questions[idx];
  qIndexEl.textContent = (idx+1);
  qEl.textContent = `${idx+1}. ${q.q}`;
  optsEl.innerHTML = "";
  q.a.forEach((txt, i)=>{
    const b = document.createElement('button');
    b.className = 'btn';
    b.textContent = txt;
    b.onclick = ()=> choose(i);
    optsEl.appendChild(b);
  });
  startTimer();
}

function startTimer(){
  clearInterval(timer);
  timeLeft = 30;
  timeEl.textContent = timeLeft;
  timer = setInterval(()=>{
    timeLeft--;
    timeEl.textContent = timeLeft;
    if(timeLeft<=0){
      clearInterval(timer);
      endGame(false, "⏰ انتهى الوقت! ترجع من البداية.");
    }
  },1000);
}

function choose(i){
  const q = questions[idx];
  clearInterval(timer);
  if(i === q.c){
    // إجابة صحيحة → صوت التصفيق
    if (sfxCorrect.src && !sfxCorrect.src.includes("REPLACE_WITH_YOUR_CORRECT_SFX_URL")) {
      sfxCorrect.currentTime = 0;
      sfxCorrect.play().catch(()=>successBeep());
    } else {
      successBeep();
    }
    msgEl.textContent = "إجابة صحيحة 🎉";
    idx++;
    // رسائل الجوائز
    if(idx === 30){ showToast("🎁 مبروك! وصلت للسؤال 30 — كسبت توصيله مجانية!"); }
    if(idx === 50){ showToast("🎁🎁 عظمة! وصلت للسؤال 50 — كسبت توصيلتين مجانًا!"); }
    setTimeout(nextQ, 500);
  } else {
    endGame(false, "❌ إجابة خاطئة! ترجع من البداية.");
  }
}

function endGame(win, reason=""){
  playing=false;
  if(win){
    qEl.textContent = "🎉 مبروووك! خلصت كل الأسئلة!";
    optsEl.innerHTML = "";
    msgEl.textContent = "🎁 كسبت 3 توصيلات مجانية — اطلب جائزتك الآن";
    const msg = encodeURIComponent("أنا كسبت 3 توصيلات مجانية في لعبة الأسئلة — Fly Express");
    const a = document.createElement('a');
    a.className='btn';
    a.textContent='اطلب جائزتك عبر واتساب 🎁';
    a.target='_blank'; a.rel='noopener';
    a.href = `https://wa.me/201017908076?text=${msg}`;
    optsEl.appendChild(a);
  } else {
    qEl.textContent = reason || "انتهت اللعبة.";
    optsEl.innerHTML = "";
    msgEl.textContent = "اضغط إعادة للبدء من الأول.";
  }
}
document.getElementById('start').addEventListener('click', startGame);
document.getElementById('reset').addEventListener('click', resetGame);

// تهيئة صوت عند أول تفاعل (تحسبًا لمنع التشغيل التلقائي)
['pointerdown','click','touchstart'].forEach(ev=>{
  window.addEventListener(ev, ()=>{ bgm.play().catch(()=>{}); }, {once:true});
});
</script>
</body>
</html>
